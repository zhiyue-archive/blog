<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  
  <title><![CDATA[zhiyue]]></title>
  
  <link href="/atom.xml" rel="self"/>
  <link href="http://blog.printf.me//"/>
  <updated>2015-06-08T08:01:02.617Z</updated>
  <id>http://blog.printf.me//</id>
  
  <author>
    <name><![CDATA[zhiyue]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[使用Docker部署IPython]]></title>
    <link href="http://blog.printf.me/2015/06/08/use-docker-deplay-ipython-notebook/"/>
    <id>http://blog.printf.me/2015/06/08/use-docker-deplay-ipython-notebook/</id>
    <published>2015-06-08T16:21:56.000Z</published>
    <updated>2015-06-08T08:01:02.617Z</updated>
    <content type="html"><![CDATA[<p><img src="http://zhiyue.qiniudn.com/15-6-8/63734849.jpg" alt="docker"><br><a id="more"></a></p>
<blockquote>
<p>本文的部署环境是Ubuntu 14.04 </p>
</blockquote>
<ul>
<li><p>Docker</p>
<blockquote>
<p>Docker 详细概念可以去search，简单来说就是把应用打包到一个容器里的轻量级系统虚拟化服务</p>
</blockquote>
</li>
<li><p>IPython Notebook</p>
<blockquote>
<p>IPython Notebook 既是一个交互计算平台，又是一个记录计算过程的「笔记本」。它由服务端和客户端两部分组成，其中服务端负责代码的解释与计算，而客户端负责与用户进行交互。 服务端可以运行在本机也可以运行在远程服务器，包含负责运算的 IPython kernel (与 QT Console 的 kernel 相同) 以及一个 HTTP/S 服务器 (Tornado)。 而客户端则是一个指向服务端地址的浏览器页面，负责接受用户的输入并负责渲染输出。</p>
</blockquote>
</li>
</ul>
<p>本文主要记录使用Docker 在服务器部署IPython Note 应用的过程。比传统的部署方案果然简单轻松不少。</p>
<h4 id="知识点">知识点</h4><ol>
<li>Docker 的基本概念</li>
<li>部署IPython 容器</li>
<li>使用Nginx 容器反向代理IPython </li>
</ol>
<h3 id="Docker_的基本概念">Docker 的基本概念</h3><p>下文的操作主要涉及Docker的一下几个知识点：</p>
<ul>
<li>Docker 的镜像(image)、容器(container)、仓库(registerie)</li>
<li>Docker 的安装</li>
<li>Docker 的基础用法</li>
<li>Docker的端口映射</li>
<li>Docker 数据卷</li>
<li>链接容器</li>
</ul>
<p>详细的信息可以自行搜索</p>
<h3 id="部署IPython">部署IPython</h3><h4 id="下载IPython_的镜像">下载IPython 的镜像</h4><p>官方Docker镜像<a href="https://registry.hub.docker.com/repos/ipython/" target="_blank" rel="external">地址</a>，里面包含5个镜像:</p>
<ul>
<li>notebook</li>
<li>ipython</li>
<li>scipyserver</li>
<li>scipystack</li>
<li>nbvierer</li>
</ul>
<p>简单说一下这几个镜像的区别 <code>ipython</code> 是以上几个镜像的共同的根镜像。<code>notebook</code> 提供了一个web的前端。<code>scipystack</code>在<code>ipython</code>的基础上安装了许多科学计算的包(cython,h5py,matplotlib,numpy,pandas,patsy,scikit-learn,scipy,seaborn,sympy,yt)，而<code>scipyserver</code>则在<code>scipystack</code>的基础上提供了web的前端。<code>nbviewer</code>则是<a href="nbviewer.ipython.org">nbviewer.ipython.org</a>的实现<br>更多详细信息请到GitHub上的<a href="https://github.com/ipython/docker-notebook" target="_blank" rel="external">docker-notebook</a> 查看<br>选择<code>scipystack</code>镜像最省事，但是需要下载的东西也越多。下文选择的也是<code>scipystack</code><br><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>sudo docker pull ipython/scipyserver</span><br></pre></td></tr></table></figure></p>
<h4 id="运行IPython_容器">运行IPython 容器</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d --name IPythonApp -p <span class="number">8888</span>:<span class="number">8888</span> -e <span class="string">"PASSWORD=your password"</span> -e <span class="string">"USE_HTTP=1"</span> -v <span class="regexp">/home/</span>zhiyue<span class="regexp">/repos/</span>ipython-<span class="string">notebook:</span><span class="regexp">/notebooks ipython/</span>scipyserver</span><br></pre></td></tr></table></figure>
<p>解析一下参数<code>-d</code> 是以后台的方式运行，<code>--name</code> 是容器的别名，<code>-p</code> 是端口映射，<code>-e</code> 是设置环境变量，这里的环境变量<code>PASSWORD</code>设置成你自己的密码就可以了，<code>USE_HTTP=1</code> 意思是使用http，<code>-v</code> 是设置数据卷，把宿主机的目录挂载到容器里，即使容器被删除，数据也可以保留下来</p>
<h3 id="Nginx_反向代理_IPython">Nginx 反向代理 IPython</h3><p>有两种方式，一种是使用官方的Nginx，另一种是使用<a href="https://registry.hub.docker.com/u/jwilder/nginx-proxy/" target="_blank" rel="external">jwilder / nginx-proxy</a>，后一种方法更加简单和方便</p>
<h4 id="方式1：nginx">方式1：nginx</h4><ul>
<li><p>使用Nginx的官方镜像<a href="https://registry.hub.docker.com/_/nginx/" target="_blank" rel="external">nginx</a></p>
</li>
<li><p>Nginx 配置文件<br><code>ipython-server.conf</code></p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"> map <span class="variable">$http_upgrade</span> <span class="variable">$connection_upgrade</span> &#123;</span><br><span class="line">        default upgrade;</span><br><span class="line">        <span class="string">''</span>      close;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line">server&#123;</span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">        server_name note.everforget.com;</span><br><span class="line">        location / &#123;</span><br><span class="line">                proxy_pass http://ipython:<span class="number">8888</span>;</span><br><span class="line">                proxy_http_version <span class="number">1.1</span>;</span><br><span class="line">                proxy_<span class="built_in">set</span>_header Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">                proxy_<span class="built_in">set</span>_header Connection <span class="string">"upgrade"</span>;</span><br><span class="line">                proxy_<span class="built_in">set</span>_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">                proxy_<span class="built_in">set</span>_header Host <span class="variable">$host</span>;</span><br><span class="line">                proxy_<span class="built_in">set</span>_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里面要注意一点是，ipython要使用websock因此要配置websocket，之前在这个问题查了好久。<br><code>proxy_pass http://ipython:8888;</code> <code>ipython</code>和后面容器连接时的别名有关。</p>
<ul>
<li>运行Nginx容器<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker <span class="keyword">run</span> -<span class="keyword">d</span> -p 80:80 --name nginx --link IPythonApp:ipython  -v `<span class="keyword">pwd</span>`/config:/etc/nginx/<span class="keyword">conf</span>.<span class="keyword">d</span>  -v `<span class="keyword">pwd</span>`/logs:/<span class="keyword">var</span>/<span class="keyword">log</span>/nginx nginx</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="方式2：nginx-proxy">方式2：nginx-proxy</h4><ul>
<li><p><a href="https://registry.hub.docker.com/u/jwilder/nginx-proxy/" target="_blank" rel="external">jwilder / nginx-proxy</a></p>
</li>
<li><p>运行nginx-proxy 容器</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -<span class="tag">p</span> <span class="number">80</span>:<span class="number">80</span> -v /var/run/docker<span class="class">.sock</span>:/tmp/docker<span class="class">.sock</span>:ro jwilder/nginx-proxy</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>运行ipython 容器</li>
</ul>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="keyword">run</span> -<span class="keyword">d</span> -<span class="keyword">e</span> <span class="string">"VIRTUAL_HOST=ipython.everforget.com"</span> --name IPython -p 8888:8888 -<span class="keyword">e</span> <span class="string">"PASSWORD=xxxxxx"</span> -<span class="keyword">e</span> <span class="string">"USE_HTTP=1"</span> -v /home/zhiyue/repos/ipython-notebook:/notebooks ipython/scipyserver</span><br></pre></td></tr></table></figure>
<p>最后放一张图：</p>
<p><img src="http://zhiyue.qiniudn.com/15-6-8/23580903.jpg" alt=""></p>
<p>这样就可以随时通过web来使用python了。</p>
<h3 id="参考">参考</h3><ul>
<li><p><a href="http://blog.opskumu.com/docker.html" target="_blank" rel="external">Docker 笔记 By 枯木</a></p>
</li>
<li><p><a href="http://godleon.github.io/blog/2014/11/23/use-docker-to-rapidly-create-ipython-notebook-environments/" target="_blank" rel="external">[Docker] 快速建立 IPython Notebook 環境</a></p>
</li>
<li><a href="http://blog.shiqichan.com/Deploying-Nginx-with-Docker/" target="_blank" rel="external">在Docker下部署Nginx</a></li>
<li><a href="http://mindonmind.github.io/2013/02/08/ipython-notebook-interactive-computing-new-era/" target="_blank" rel="external">IPython Notebook: 交互计算新时代</a></li>
</ul>
<hr>
<p>更新日志：</p>
<ul>
<li>2015-6-8 添加配图</li>
<li>2015-6-6 第一次撰写</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="http://zhiyue.qiniudn.com/15-6-8/63734849.jpg" alt="docker"><br>]]>
    
    </summary>
    
      <category term="Docker" scheme="http://blog.printf.me/tags/Docker/"/>
    
      <category term="IPyhton" scheme="http://blog.printf.me/tags/IPyhton/"/>
    
      <category term="Python" scheme="http://blog.printf.me/tags/Python/"/>
    
      <category term="nginx" scheme="http://blog.printf.me/tags/nginx/"/>
    
      <category term="系统运维" scheme="http://blog.printf.me/categories/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hello World]]></title>
    <link href="http://blog.printf.me/2015/04/30/hello-world/"/>
    <id>http://blog.printf.me/2015/04/30/hello-world/</id>
    <published>2015-04-30T04:09:41.000Z</published>
    <updated>2015-06-08T08:01:02.617Z</updated>
    <content type="html"><![CDATA[<p>Welcome to <a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>More info: <a href="http://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run_server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate_static_files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy_to_remote_sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>Welcome to <a href="http://hexo.io/">Hexo</a>! This is your very first post. Check <a href="http://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="http://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick_Start">Quick Start</h2><h3 id="Create_a_new_post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[Hexo搭建Wiki]]></title>
    <link href="http://blog.printf.me/2015/04/30/Hexo%E6%90%AD%E5%BB%BAWiki/"/>
    <id>http://blog.printf.me/2015/04/30/Hexo搭建Wiki/</id>
    <published>2015-04-30T04:09:41.000Z</published>
    <updated>2015-06-08T08:01:02.617Z</updated>
    <content type="html"><![CDATA[<ul>
<li>2015-4-30 第一次编写</li>
</ul>
<hr>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/Hexo.png" alt="此处输入图片的描述"></p>
<h2 id="0x01准备：">0x01准备：</h2><ol>
<li><a href="http://twitter.com/tommy351" target="_blank" rel="external">tommy351</a>编写的静态博客框架<a href="http://hexo.io/" target="_blank" rel="external">Hexo</a>（目前版本是3.0.x）</li>
<li><a href="https://github.com/wzpan/hexo-theme-wixo/" target="_blank" rel="external">Wixo</a>的主题</li>
<li>GitHub的repos的gh-pages 分支放置wiki，托管于GitHub的Pages服务上</li>
<li>源码放置在Github同一个repos下的source分支下进行版本管理</li>
<li><a href="https://travis-ci.org/" target="_blank" rel="external">Travis CI</a>自动化测试框架自动编译网站</li>
</ol>
<a id="more"></a>
<h2 id="0x02过程：">0x02过程：</h2><h3 id="安装NodeJs">安装NodeJs</h3><p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/NodeJs.png" alt="此处输入图片的描述"><br>因为Hexo是使用Nodejs编写的，所以需要部署NodeJs的环境</p>
<ul>
<li><a href="https://nodejs.org/" target="_blank" rel="external">下载nodejs</a></li>
</ul>
<p>Windows 可以直接下载到安装包安装即可，其它系统稍后补充</p>
<h3 id="安装Hexo(3-x以上)">安装Hexo(3.x以上)</h3><h4 id="安装hexo-cli">安装hexo-cli</h4><pre><code>$ npm install hexo-<span class="keyword">cli</span> -<span class="keyword">g</span>
</code></pre><p>3.x以上版本相比2.x以下版本使用上有差别，3.x版本模块化程度较高，你可以不用经常更新hexo-cli，但是多个hexo版本可以共存</p>
<h4 id="初始化目录">初始化目录</h4><pre><code><span class="variable">$ </span>hexo init <span class="constant">Wiki</span>
</code></pre><blockquote>
<p>PS I:> hexo init Wiki<br>    INFO  Copying data to I:\Wiki<br>    INFO  You are almost done! Don’t forget to run ‘npm install’ before you start blogging with Hexo!</p>
</blockquote>
<p>这样就会建立一个Wiki的文件夹，在文件夹里已经做了一些初始化的工作:</p>
<ul>
<li>目录结构：<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- wiki</span><br><span class="line">    |<span class="string">-- scaffolds           #工具模板</span><br><span class="line">    </span>|<span class="string">       </span>|<span class="string">-- draft.md</span><br><span class="line">    </span>|<span class="string">       </span>|<span class="string">-- page.md</span><br><span class="line">    </span>|<span class="string">       </span>|<span class="string">-- post.md</span><br><span class="line">    </span>|<span class="string">-- source</span><br><span class="line">    </span>|<span class="string">   </span>|<span class="string">-- _posts          #文章文件夹</span><br><span class="line">    </span>|<span class="string">         </span>|<span class="string">-- hello-world.md</span><br><span class="line">    </span>|<span class="string">-- themes              #主题文件夹</span><br><span class="line">    </span>|<span class="string">     </span>|<span class="string">-- landscape     # 默认主题文件夹</span><br><span class="line">    </span>|<span class="string">-- .gitignore</span><br><span class="line">    </span>|<span class="string">-- _config.yml         #全局配置文件</span><br><span class="line">    </span>|<span class="string">-- package.json        #插件的配置，使用npm install --save 会写入这里</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>另外还有<code>source/_drafts</code>存放的是草稿</p>
<h4 id="安装_Hexo">安装 Hexo</h4><p>切到Wiki目录下，然后安装指定版本的Hexo &gt; 3.0</p>
<pre><code>$ npm <span class="operator"><span class="keyword">install</span> hexo <span class="comment">--save</span></span>
</code></pre><p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/hexo_install.png" alt="此处输入图片的描述"><br>然后，安装相关默认的npm插件</p>
<pre><code>$ npm <span class="keyword">install</span> 
</code></pre><p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/npm_install.png" alt="此处输入图片的描述"></p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">hexo-<span class="keyword">renderer</span>-ejs<span class="variable">@0</span>.1.0 node_modules\hexo-<span class="keyword">renderer</span>-ejs</span><br><span class="line">├── ejs<span class="variable">@1</span>.0.0</span><br><span class="line">└── lodash<span class="variable">@2</span>.4.2</span><br><span class="line"></span><br><span class="line">hexo-generator-index<span class="variable">@0</span>.1.1 node_modules\hexo-generator-index</span><br><span class="line">├── object-assign<span class="variable">@2</span>.0.0</span><br><span class="line">└── hexo-pagination<span class="variable">@0</span>.0.2 (utils-merge<span class="variable">@1</span>.0.0)</span><br><span class="line"></span><br><span class="line">hexo-generator-tag<span class="variable">@0</span>.1.1 node_modules\hexo-generator-tag</span><br><span class="line">├── object-assign<span class="variable">@2</span>.0.0</span><br><span class="line">└── hexo-pagination<span class="variable">@0</span>.0.2 (utils-merge<span class="variable">@1</span>.0.0)</span><br><span class="line"></span><br><span class="line">hexo-generator-category<span class="variable">@0</span>.1.2 node_modules\hexo-generator-category</span><br><span class="line">├── object-assign<span class="variable">@2</span>.0.0</span><br><span class="line">└── hexo-pagination<span class="variable">@0</span>.0.2 (utils-merge<span class="variable">@1</span>.0.0)</span><br><span class="line"></span><br><span class="line">hexo-generator-archive<span class="variable">@0</span>.1.2 node_modules\hexo-generator-archive</span><br><span class="line">├── object-assign<span class="variable">@2</span>.0.0</span><br><span class="line">└── hexo-pagination<span class="variable">@0</span>.0.2 (utils-merge<span class="variable">@1</span>.0.0)</span><br><span class="line"></span><br><span class="line">hexo-<span class="keyword">renderer</span>-marked<span class="variable">@0</span>.2.5 node_modules\hexo-<span class="keyword">renderer</span>-marked</span><br><span class="line">├── object-assign<span class="variable">@2</span>.0.0</span><br><span class="line">├── marked<span class="variable">@0</span>.3.3</span><br><span class="line">├── <span class="keyword">strip</span>-indent<span class="variable">@1</span>.0.1 (get-stdin<span class="variable">@4</span>.0.1)</span><br><span class="line">└── hexo-util<span class="variable">@0</span>.1.6 (ent<span class="variable">@2</span>.2.0, bluebird<span class="variable">@2</span>.9.25, highlight.js<span class="variable">@8</span>.5.0)</span><br><span class="line"></span><br><span class="line">hexo-<span class="keyword">renderer</span>-stylus<span class="variable">@0</span>.2.3 node_modules\hexo-<span class="keyword">renderer</span>-stylus</span><br><span class="line">├── stylus<span class="variable">@0</span>.50.0 (css-parse<span class="variable">@1</span>.7.0, mkdirp<span class="variable">@0</span>.3.5, sax<span class="variable">@0</span>.5.8, <span class="keyword">source</span>-map<span class="variable">@0</span>.1.43, debug<span class="variable">@2</span>.1.3, glob<span class="variable">@3</span>.2.11)</span><br><span class="line">└── nib<span class="variable">@1</span>.1.0 (stylus<span class="variable">@0</span>.49.3)</span><br><span class="line"></span><br><span class="line">hexo-server<span class="variable">@0</span>.1.2 node_modules\hexo-server</span><br><span class="line">├── object-assign<span class="variable">@2</span>.0.0</span><br><span class="line">├── open<span class="variable">@0</span>.0.5</span><br><span class="line">├── mime<span class="variable">@1</span>.3.4</span><br><span class="line">├── bluebird<span class="variable">@2</span>.9.25</span><br><span class="line">├── chalk<span class="variable">@0</span>.5.1 (ansi-styles<span class="variable">@1</span>.1.0, escape-<span class="keyword">string</span>-regexp<span class="variable">@1</span>.0.3, supports-<span class="keyword">color</span><span class="variable">@0</span>.2.0, <span class="keyword">strip</span>-ansi<span class="variable">@0</span>.3.0, has-ansi<span class="variable">@0</span>.1.0)</span><br><span class="line">├── compression<span class="variable">@1</span>.4.3 (vary<span class="variable">@1</span>.0.0, on-headers<span class="variable">@1</span>.0.0, bytes<span class="variable">@1</span>.0.0, debug<span class="variable">@2</span>.1.3, compressible<span class="variable">@2</span>.0.2, accepts<span class="variable">@1</span>.2.5)</span><br><span class="line">├── morgan<span class="variable">@1</span>.5.2 (basic-auth<span class="variable">@1</span>.0.0, depd<span class="variable">@1</span>.0.1, debug<span class="variable">@2</span>.1.3, on-finished<span class="variable">@2</span>.2.1)</span><br><span class="line">├── connect<span class="variable">@3</span>.3.5 (utils-merge<span class="variable">@1</span>.0.0, parseurl<span class="variable">@1</span>.3.0, debug<span class="variable">@2</span>.1.3, finalhandler<span class="variable">@0</span>.3.4)</span><br><span class="line">└── serve-static<span class="variable">@1</span>.9.2 (utils-merge<span class="variable">@1</span>.0.0, escape-html<span class="variable">@1</span>.0.1, parseurl<span class="variable">@1</span>.3.0, send<span class="variable">@0</span>.12.2)</span><br></pre></td></tr></table></figure>
<p>默认安装了：</p>
<ul>
<li><a href="https://github.com/hexojs/hexo-renderer-ejs" target="_blank" rel="external">hexo-renderer-ejs</a>   <a href="https://github.com/tj/ejs" target="_blank" rel="external">EJS</a>渲染器</li>
<li><a href="https://github.com/hexojs/hexo-generator-index" target="_blank" rel="external">hexo-generator-index</a>   用来配置每页展示文章的数目</li>
<li><a href="https://github.com/hexojs/hexo-generator-tagtps://github.com/hexojs/hexo-generator-index" target="_blank" rel="external">hexo-generator-tag</a> 标签生成</li>
<li><a href="https://github.com/hexojs/hexo-generator-categoryr-tagtps://github.com/hexojs/hexo-generator-index" target="_blank" rel="external">hexo-generator-category</a> 目录生成</li>
<li><a href="https://github.com/hexojs/hexo-generator-archive" target="_blank" rel="external">hexo-generator-archive</a> 文章生成</li>
<li><a href="https://github.com/hexojs/hexo-renderer-marked" target="_blank" rel="external">hexo-renderer-marked</a> markdown 渲染器</li>
<li><a href="https://github.com/hexojs/hexo-renderer-stylus" target="_blank" rel="external">hexo-renderer-stylus</a> CSS渲染器</li>
<li><a href="https://github.com/hexojs/hexo-server" target="_blank" rel="external">hexo-server</a> Server module for Hexo</li>
</ul>
<p>安装其他常用的插件：</p>
<pre><code>$ npm <span class="operator"><span class="keyword">install</span> hexo-deployer-git <span class="comment">--save</span>
$ npm <span class="keyword">install</span> hexo-generator-feed@<span class="number">1</span> <span class="comment">--save</span>
$ npm <span class="keyword">install</span> hexo-generator-sitemap@<span class="number">1</span> <span class="comment">--save</span>
$ npm <span class="keyword">install</span> hexo-fs <span class="comment">--save</span>
$ npm <span class="keyword">install</span> hexo-renderer-mathjax <span class="comment">--save</span></span>
</code></pre><ul>
<li><p><a href="https://github.com/hexojs/hexo-deployer-git" target="_blank" rel="external">hexo-deployer-git</a> </p>
<blockquote>
<p>Git deployer plugin for Hexo.</p>
</blockquote>
</li>
<li><p><a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="external">hexo-generator-feed</a></p>
<blockquote>
<p>Feed generator for Hexo.</p>
</blockquote>
</li>
<li><p><a href="https://github.com/hexojs/hexo-generator-sitemap" target="_blank" rel="external">hexo-generator-sitemap</a></p>
<blockquote>
<p>Sitemap generator for Hexo</p>
</blockquote>
</li>
<li><p><a href="https://github.com/hexojs/hexo-fs" target="_blank" rel="external">hexo-fs</a></p>
<blockquote>
<p>文件 IO 为了要使用mathjax模块</p>
</blockquote>
</li>
<li><p><a href="https://github.com/phoenixcw/hexo-renderer-mathjax" target="_blank" rel="external">hexo-renderer-mathjax</a></p>
<blockquote>
<p>Add support of MathJax for Hexo.</p>
</blockquote>
</li>
</ul>
<p>更多的插件参见<a href="http://hexo.io/plugins/" target="_blank" rel="external">官网插件列表</a> 或者 <a href="https://github.com/hexojs/hexo/wiki/Plugins" target="_blank" rel="external">Github上的列表</a></p>
<h3 id="配置_Hexo">配置 Hexo</h3><p> 初始化目录</p>
<pre><code><span class="variable">$ </span>git init
</code></pre><p>创建<code>source</code>分支</p>
<pre><code>$ git checkout -<span class="tag">b</span> source
</code></pre><h4 id="安装与配置主题">　安装与配置主题</h4><ul>
<li>fork 主题</li>
</ul>
<p>从<a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">主题列表</a> 挑选自己喜欢的主题,然后fork到自己的repos，这里使用的是Wiki主题Wixo</p>
<blockquote>
<p>wiki for hexo </p>
</blockquote>
<p>选取 w i x o</p>
<ul>
<li>修改主题配置文件</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>cd .. <span class="comment">#切换到上级目录</span></span><br><span class="line"><span class="variable">$ </span>git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/zhiyue</span><span class="regexp">/hexo-theme-wixo themes/wixo</span></span><br></pre></td></tr></table></figure>
<p>修改完成后再push上GitHub上</p>
<ul>
<li>下载主题</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>cd <span class="constant">Wiki </span>    <span class="comment">#切换到Wiki目录</span></span><br><span class="line"><span class="variable">$ </span>git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/zhiyue</span><span class="regexp">/hexo-theme-wixo themes/wixo</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>使用主题<br>去全局配置文件 <code>_config.yml</code> 修改参数</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## <span class="string">Plugins:</span> <span class="string">http:</span><span class="comment">//hexo.io/plugins/</span></span><br><span class="line">## <span class="string">Themes:</span> <span class="string">http:</span><span class="comment">//hexo.io/themes/</span></span><br><span class="line"><span class="string">theme:</span> wixo #这里修改为主题的名字</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置主题<br><code>wixo</code>主题配置：</p>
</li>
</ul>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rss</span>: <span class="string">atom.xml</span></span><br><span class="line"><span class="attribute">fancybox</span>: <span class="string">true</span></span><br><span class="line"><span class="attribute">favicon</span>: <span class="string">favicon.ico</span></span><br><span class="line"><span class="attribute">fold</span>: <span class="string">true</span></span><br><span class="line"><span class="attribute">google_analytics:</span></span><br></pre></td></tr></table></figure>
<p>这个不同的主题配置会很不一样，下面这个是<code>modernist</code>主题的配置<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">menu</span>:</span><br><span class="line">  <span class="attribute">Home</span>: /</span><br><span class="line">  <span class="attribute">Archives</span>: /archives</span><br><span class="line"><span class="attribute">rss</span>: /atom.xml</span><br><span class="line"></span><br><span class="line"><span class="attribute">archive_date_format</span>: MMM DD</span><br><span class="line"><span class="attribute">fancybox</span>: true</span><br><span class="line"></span><br><span class="line"><span class="attribute">duoshuo_shortname</span>: zhiyue</span><br><span class="line"></span><br><span class="line"><span class="attribute">google_analytics</span>:</span><br><span class="line"><span class="attribute">favicon</span>: /favicon.ico</span><br></pre></td></tr></table></figure></p>
<ul>
<li>使用子模块管理主题</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git submodule add <span class="symbol">https:</span>/<span class="regexp">/github.com/zhiyue</span><span class="regexp">/hexo-theme-wixo.git themes/wixo</span></span><br></pre></td></tr></table></figure>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/git_submodule.png" alt="此处输入图片的描述"></p>
<ul>
<li>主题的更新<br>如果fork的主题作者有更新，可以在GitHub上pull过来然后再合并，然后在自己的blog的目录下要注意一下子模块的更新模式</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git submodule init </span><br><span class="line"><span class="variable">$ </span>git submodule update</span><br><span class="line"><span class="variable">$ </span>cd themes/wixo</span><br><span class="line"><span class="variable">$ </span>git checkout <span class="constant">HEAD </span> <span class="comment">#切换到最新的head</span></span><br><span class="line"><span class="variable">$ </span>cd -</span><br><span class="line"><span class="variable">$ </span>git add.</span><br><span class="line"><span class="variable">$ </span>git commit -m <span class="string">"update submodule "</span> <span class="comment">#更新submodule的标记</span></span><br></pre></td></tr></table></figure>
<h4 id="全局配置">　全局配置</h4><p>修改_config.yml 文件只需修改几个，通常需要修改的地方:</p>
<ul>
<li>站点名称</li>
<li>URL格式</li>
<li>归档设置</li>
<li>disqus评论用户名</li>
<li>部署配置</li>
</ul>
<blockquote>
<p>注意冒号后面添加一个半角空格 再设置参数</p>
</blockquote>
<p>下面是我的<code>_config.yml</code>的配置<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="preprocessor"># Hexo Configuration</span></span><br><span class="line"><span class="preprocessor">## Docs: http://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="preprocessor">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Site</span></span><br><span class="line"><span class="label">title:</span> zhiyue   <span class="preprocessor">## 网站标题</span></span><br><span class="line"><span class="label">subtitle:</span>       <span class="preprocessor">## 网站副标题</span></span><br><span class="line"><span class="label">description:</span>    <span class="preprocessor">## 网站描述</span></span><br><span class="line"><span class="label">author:</span> zhiyue  <span class="preprocessor">## 您的名字</span></span><br><span class="line"><span class="label">language:</span> zh_CN <span class="preprocessor">## 网站使用的语言</span></span><br><span class="line"><span class="label">timezone:</span>       <span class="preprocessor">## 网站时区。Hexo 预设使用您电脑的时区</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># URL</span></span><br><span class="line"><span class="preprocessor">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="preprocessor">##如果您的网站存放在子目录中，例如 http://yoursite.com/blog，则请将您的 url 设为 http://yoursite.com/blog 并把 ##root 设为 /blog/。</span></span><br><span class="line"><span class="label">url:</span> http://blog.printf.me              <span class="preprocessor">## 网址</span></span><br><span class="line"><span class="label">root:</span> /                                 <span class="preprocessor">## 网站根目录</span></span><br><span class="line"><span class="label">permalink:</span> :year/:month/:day/:title/    <span class="preprocessor">## 文章的 永久链接 格式</span></span><br><span class="line"><span class="label">permalink_defaults:</span>                     <span class="preprocessor">## 永久链接中各部分的默认值 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Directory</span></span><br><span class="line"><span class="label">source_dir:</span> source          <span class="preprocessor">## 资源文件夹，这个文件夹用来存放内容。</span></span><br><span class="line"><span class="label">public_dir:</span> public          <span class="preprocessor">## 公共文件夹，这个文件夹用于存放生成的站点文件。</span></span><br><span class="line"><span class="label">tag_dir:</span> tags               <span class="preprocessor">## 标签文件夹</span></span><br><span class="line"><span class="label">archive_dir:</span> archives       <span class="preprocessor">## 归档文件夹</span></span><br><span class="line"><span class="label">category_dir:</span> categories    <span class="preprocessor">## 分类文件夹</span></span><br><span class="line"><span class="label">code_dir:</span> downloads/code    <span class="preprocessor">## Include code 文件夹</span></span><br><span class="line"><span class="label">i18n_dir:</span> :lang             <span class="preprocessor">## 国际化（i18n）文件夹</span></span><br><span class="line"><span class="label">skip_render:</span>                <span class="preprocessor">## 跳过指定文件的渲染，您可使用 glob 来配置路径。</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Writing</span></span><br><span class="line"><span class="label">new_post_name:</span> :title.md                <span class="preprocessor">## File name of new posts</span></span><br><span class="line"><span class="label">default_layout:</span> post                    <span class="preprocessor">## 预设布局</span></span><br><span class="line"><span class="label">titlecase:</span> false                        <span class="preprocessor">## Transform title into titlecase</span></span><br><span class="line"><span class="label">external_link:</span> true                     <span class="preprocessor">## Open external links in new tab</span></span><br><span class="line"><span class="label">filename_case:</span> <span class="number">0</span>                        <span class="preprocessor">## 把文件名称转换为 (1) 小写或 (2) 大写</span></span><br><span class="line"><span class="label">render_drafts:</span> false                    <span class="preprocessor">## 显示草稿</span></span><br><span class="line"><span class="label">post_asset_folder:</span> false                <span class="preprocessor">## 启动 Asset 文件夹</span></span><br><span class="line"><span class="label">relative_link:</span> false                    <span class="preprocessor">## 把链接改为与根目录的相对位址</span></span><br><span class="line"><span class="label">future:</span> true                            <span class="preprocessor">## 显示未来的文章</span></span><br><span class="line"><span class="label">highlight:</span>                              <span class="preprocessor">## 代码块的设置</span></span><br><span class="line">  enable: true                          <span class="preprocessor">## 启用</span></span><br><span class="line">  line_number: true                     <span class="preprocessor">## 行号</span></span><br><span class="line">  tab_replace: true                     <span class="preprocessor">## tab 替换</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Category &amp; Tag</span></span><br><span class="line"><span class="label">default_category:</span> uncategorized         <span class="preprocessor">## 默认分类</span></span><br><span class="line"><span class="label">category_map:</span>                           <span class="preprocessor">## 分类别名</span></span><br><span class="line"><span class="label">tag_map:</span>                                <span class="preprocessor">## 标签别名</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Date / Time format</span></span><br><span class="line"><span class="preprocessor">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="preprocessor">## You can customize the date format as defined in</span></span><br><span class="line"><span class="preprocessor">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="label">date_format:</span> YYYY-MM-DD                 <span class="preprocessor">## 日期格式</span></span><br><span class="line"><span class="label">time_format:</span> HH:mm:ss                   <span class="preprocessor">## 时间格式</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Pagination</span></span><br><span class="line"><span class="preprocessor">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="label">per_page:</span> <span class="number">10</span>                            <span class="preprocessor">## 每页显示的文章量 (0 = 关闭分页功能)</span></span><br><span class="line"><span class="label">pagination_dir:</span> page                    <span class="preprocessor">## 分页目录</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Extensions</span></span><br><span class="line"><span class="preprocessor">## Plugins: http://hexo.io/plugins/</span></span><br><span class="line"><span class="preprocessor">## Themes: http://hexo.io/themes/</span></span><br><span class="line"><span class="label">theme:</span> modernist                        <span class="preprocessor">## 当前主题名称</span></span><br><span class="line"></span><br><span class="line"><span class="preprocessor"># Deployment</span></span><br><span class="line"><span class="preprocessor">## Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="label">deploy:</span>                                 <span class="preprocessor">##部署</span></span><br><span class="line">  type:</span><br></pre></td></tr></table></figure></p>
<h3 id="写文章">写文章</h3><pre><code>$ hexo <span class="built_in">new</span> <span class="built_in">post</span> <span class="string">"tiltle"</span>
</code></pre><p>这样就会在<code>source/_post/</code>下创建一个<code>tiltle.md</code><br>Hexo使用markdown语法的纯文本存放文章 后缀为.md 你可以在_post文件夹里面新建这个后缀的.md文件使用的全是UTF-8编码</p>
<p>格式如下：</p>
<pre><code><span class="label">title:</span> title <span class="preprocessor">#文章标题</span>
<span class="label">date:</span> <span class="number">2015</span>-<span class="number">02</span>-<span class="number">05</span> <span class="number">12</span>:<span class="number">47</span>:<span class="number">44</span> <span class="preprocessor">#文章生成时间</span>
<span class="label">categories:</span> <span class="preprocessor">#文章分类目录 可以省略</span>
<span class="label">tags:</span> <span class="preprocessor">#文章标签 可以省略</span>
<span class="label">description:</span> <span class="preprocessor">#你对本页的描述 可以省略</span>
</code></pre><p>多标签注意语法格式 如下:<br><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tags:</span><br><span class="line">  -<span class="ruby"> 标签<span class="number">1</span></span><br><span class="line"></span>  -<span class="ruby"> 标签<span class="number">2</span></span><br><span class="line"></span>  -<span class="ruby"> 标签<span class="number">3</span></span><br><span class="line"></span>  -<span class="ruby"> etc...</span></span><br></pre></td></tr></table></figure></p>
<p>正文中可以使用<!--more-->设置文章摘要 如下:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">以上是文章摘要</span><br><span class="line">  <span class="comment">&lt;!--more--&gt;</span></span><br><span class="line">  以下是余下全文</span><br></pre></td></tr></table></figure></p>
<h3 id="生成与部署">生成与部署</h3><ul>
<li>生成blog静态文件：</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>hexo g</span><br></pre></td></tr></table></figure>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/hexo_g.png" alt="此处输入图片的描述"></p>
<ul>
<li>在本地环境测试：</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>hexo s</span><br></pre></td></tr></table></figure>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/preview.png" alt="此处输入图片的描述"></p>
<h4 id="GitHub_配置">GitHub 配置</h4><ul>
<li>创建gh-pages分支<br>如果要部署在github上，必须名称叫gh-pages。所以先创建一个叫gh-pages的分支</li>
</ul>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git checkout --orphan gh-pages</span><br><span class="line"><span class="variable">$ </span>git rm -rf .    <span class="comment"># 砍掉所有档案重來</span></span><br><span class="line"><span class="comment"># 加新档案</span></span><br><span class="line"><span class="comment">## git add .</span></span><br><span class="line"><span class="variable">$ </span>git commit -m <span class="string">'create new branch'</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>提交到GitHub<br>在GitHub创建一个新的repos，然后再本地使用以下命令：</p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>git remote add origin <span class="symbol">https:</span>/<span class="regexp">/github.com/</span>(github用户名)/(项目名称).git  <span class="comment">##添加远程仓库</span></span><br><span class="line"><span class="variable">$ </span>git push --all origin                           <span class="comment">##push</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义域名设置<br>在<code>source</code>文件夹下创建<code>CNAME</code>文件 写入你的自定义域名</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog<span class="class">.printf</span><span class="class">.me</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置dnspod<br>添加<code>CNAME</code>记录 记录值<code>zhiyue.github.io.</code><br><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/dnspod.png" alt="此处输入图片的描述"></p>
</li>
<li><p>404 页面 和 favicon.ico<br>在<code>source</code>文件夹下 创建<code>404.html</code> 和 把<code>favicon.ico</code> 放置至此</p>
</li>
<li><p>deploy 配置<br>修改_config.yml文件</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## <span class="string">Docs:</span> <span class="string">http:</span><span class="comment">//hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="string">deploy:</span></span><br><span class="line"><span class="label">  type:</span> git</span><br><span class="line"><span class="label">  message:</span> update</span><br><span class="line"><span class="label">  repo:</span> <span class="string">https:</span><span class="comment">//github.com/zhiyue/blog.git</span></span><br><span class="line"><span class="label">  branch:</span> gh-pages</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="配置travis_ci">配置travis ci</h3><ul>
<li><p>生成<code>Personal access tokens</code><br>在<a href="https://github.com/settings/tokens" target="_blank" rel="external">GitHub token 生成页面</a>按照以下步骤生成一个可以让第三方访问的<code>token</code>，它具有可以写<code>repos</code>的权限。这样就可以在生成网站的时候通过这个<code>token</code>提交到<code>repos</code>上了。<br><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/generate_token.png" alt="generate token"></p>
</li>
<li><p>启用<code>travis ci</code><br>登陆<a href="https://travis-ci.org" target="_blank" rel="external">travis ci</a>绑定GitHub的账户，<code>travis ci</code>会同步<code>repos</code>的列表，选择你想启用自动化测试的<code>repos</code><br><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/travis.png" alt="travis ci "></p>
</li>
<li><p>编写<code>.travis.yml</code><br><code>travis ci</code>会依据<code>.travis.yml</code>进行一些环境的设置安装以及后续的测试。下面的<code>.travis.yml</code>是参考网上的yml编写的</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"># Deploy hexo site by travis-ci</span><br><span class="line"># https://github.com/jkeylu/deploy-hexo-site-by-travis-ci</span><br><span class="line"># LICENSE: MIT</span><br><span class="line">#</span><br><span class="line"># 1. Copy this file to the root of your repository, then rename it to '.travis.yml'</span><br><span class="line"># 2. Replace 'YOUR NAME' and 'YOUR EMAIL' at line 29</span><br><span class="line"># 3. Add an Environment Variable 'DEPLOY_REPO'</span><br><span class="line">#     1. Generate github access token on https://github.com/settings/applications#personal-access-tokens</span><br><span class="line">#     2. Add an Environment Variable on https://travis-ci.org/&#123;github username&#125;/&#123;repository name&#125;/settings/env_vars</span><br><span class="line">#         Variable Name: DEPLOY_REPO</span><br><span class="line">#         Variable Value: https://&#123;githb access token&#125;@github.com/&#123;github username&#125;/&#123;repository name&#125;.git </span><br><span class="line">#         Example: DEPLOY_REPO=https://6b75cfe9836f56e6d21187622730889874476c23@github.com/jkeylu/test-hexo-on-travis-ci.git</span><br><span class="line"></span><br><span class="line">language: node_js</span><br><span class="line"></span><br><span class="line">node_js:</span><br><span class="line">  -<span class="ruby"> <span class="string">"0.12"</span>  <span class="comment">#设置node_js的版本</span></span><br><span class="line"></span></span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    -<span class="ruby"> source    <span class="comment">#检测的分支，一旦分支有新的提交就会触发脚本</span></span><br><span class="line"></span></span><br><span class="line">before_install: #安装前的工作</span><br><span class="line">-<span class="ruby"> npm install -g hexo-cli</span><br><span class="line"></span></span><br><span class="line">install:</span><br><span class="line">#- npm install hexo-renderer-ejs@0.1.0 --save</span><br><span class="line">#- npm install hexo-renderer-marked@0.1.0 --save</span><br><span class="line">#- npm install hexo-renderer-stylus@0.1.0 --save</span><br><span class="line">#- npm install hexo-generator-feed@0.2.1 --save</span><br><span class="line">#- npm install hexo-generator-sitemap@0.2.0 --save</span><br><span class="line">#- npm install hexo-tag-bootstrap@0.0.6 --save</span><br><span class="line">-<span class="ruby"> npm install</span><br><span class="line"></span></span><br><span class="line"></span><br><span class="line">script:                         #运行的测试脚本</span><br><span class="line">  -<span class="ruby"> <span class="string">"git submodule init"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git submodule update"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"hexo generate "</span></span><br><span class="line"></span>  </span><br><span class="line">after_success:                      #push到github上</span><br><span class="line">  -<span class="ruby"> <span class="string">"git clone $DEPLOY_REPO git_deploy"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"cd git_deploy"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git checkout gh-pages"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"cd .."</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"rm -r git_deploy/*"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"cp -r public/* git_deploy"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"cd git_deploy"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git config --global push.default simple"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git config --global user.name 'zhiyue'"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git config --global user.email cszhiyue@gmail.com"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git add -A"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git commit -m 'Site updated'"</span></span><br><span class="line"></span>  -<span class="ruby"> <span class="string">"git push -q"</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>设置环境变量<code>DEPLOY_REPO</code><br> <code>.travis.yml</code>中用到的<code>DEPLOY_REPO</code>可以按照图片的步骤设置</p>
</li>
</ul>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/create_var.png" alt="genertare var"></p>
<ul>
<li>travis ci 自动化生成与部署</li>
</ul>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/test.png" alt="此处输入图片的描述"></p>
<ul>
<li>网站截图：</li>
</ul>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/wiki_2.png" alt="此处输入图片的描述"></p>
<h2 id="0x03_参考：">0x03 参考：</h2><ul>
<li><a href="http://ippotsuko.com/build-your-hexo-blog-3/" target="_blank" rel="external">Hexo 3.0 靜態博客使用指南</a></li>
<li><a href="http://segmentfault.com/a/1190000000406019" target="_blank" rel="external">使用Jekyll在Github上搭建个人博客（将本地博客上传至github）</a></li>
<li><a href="https://ihower.tw/blog/archives/5691" target="_blank" rel="external">如何建立一個沒有 Parent 的獨立 Git branch</a></li>
<li><a href="http://blog.csdn.net/u010520912/article/details/18993001" target="_blank" rel="external">使用Git将本地代码上传到GitHub</a></li>
</ul>
<hr>
<p>todo:</p>
<ul>
<li>补充其他系统的详细情况</li>
<li>补充多说插件和谷歌analyse</li>
<li><del>详细补充配置文件</del></li>
<li><del>加配图</del></li>
</ul>
<hr>
]]></content>
    <summary type="html">
    <![CDATA[<ul>
<li>2015-4-30 第一次编写</li>
</ul>
<hr>
<p><img src="http://7xilqm.com1.z0.glb.clouddn.com/Hexo_wiki/Hexo.png" alt="此处输入图片的描述"></p>
<h2 id="0x01准备：">0x01准备：</h2><ol>
<li><a href="http://twitter.com/tommy351">tommy351</a>编写的静态博客框架<a href="http://hexo.io/">Hexo</a>（目前版本是3.0.x）</li>
<li><a href="https://github.com/wzpan/hexo-theme-wixo/">Wixo</a>的主题</li>
<li>GitHub的repos的gh-pages 分支放置wiki，托管于GitHub的Pages服务上</li>
<li>源码放置在Github同一个repos下的source分支下进行版本管理</li>
<li><a href="https://travis-ci.org/">Travis CI</a>自动化测试框架自动编译网站</li>
</ol>]]>
    
    </summary>
    
      <category term="Hexo" scheme="http://blog.printf.me/tags/Hexo/"/>
    
      <category term="Wiki" scheme="http://blog.printf.me/tags/Wiki/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[mathjax]]></title>
    <link href="http://blog.printf.me/2015/04/30/mathjax/"/>
    <id>http://blog.printf.me/2015/04/30/mathjax/</id>
    <published>2015-04-30T02:13:26.000Z</published>
    <updated>2015-06-08T08:01:02.617Z</updated>
    <content type="html"><![CDATA[<p>$$<br>\frac{\partial u}{\partial t} = h^2 \left( \frac{\partial^2 u}{\partial x^2} + \frac{\partial^2 u}{\partial y^2} + \frac{\partial^2 u}{\partial z^2}\right)<br>$$</p>
<a id="more"></a>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C</span></span><br><span class="line"><span class="preprocessor">#<span class="keyword">include</span> &lt;stdio.h&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"Hello World\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    <summary type="html">
    <![CDATA[<p>$$<br>\frac{\partial u}{\partial t} = h^2 \left( \frac{\partial^2 u}{\partial x^2} + \frac{\partial^2 u}{\partial y^2} + \frac{\partial^2 u}{\partial z^2}\right)<br>$$</p>]]>
    
    </summary>
    
      <category term="mathjax" scheme="http://blog.printf.me/tags/mathjax/"/>
    
  </entry>
  
</feed>